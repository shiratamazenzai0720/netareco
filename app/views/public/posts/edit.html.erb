  <%= render 'layouts/edit', posts: @posts %>
  
<div class="container mt-4 mb-5">
  <div class="row justify-content-center">
    <div class="col-md-9">
      <div class="shadow rounded">
        <div class="p-3 border-bottom bg-white text-center">
          <h2 class="mb-0 mt-4">編集</h2>
        </div>

        <div class="p-4 bg-white text-left">
          <%= form_with model: @post, method: :patch do |f| %>
            <label for="inputComedian">芸人名</label>
              <%= f.text_field :comedian_name, autofocus: true, id: "inputComedian", placeholder: "芸人名", class: "form-control mb-3" %>
            <label for="inputTitle">ネタ</label>
              <%= f.text_field :title, autofocus: true, id: "inputTitle", placeholder: "ネタ", class: "form-control mb-3" %>
            <label for="inputBody">感想</label>
              <%= f.text_area :body, rows: 3, autofocus: true, id: "inputBody", placeholder: "感想", class: "form-control mb-3" %>
            <div class="mb-3" id="edit-star">
              <label for="inputStar">おすすめ度</label>
                <%= f.hidden_field :rate, id: :review_star, class: 'form-control' %>
                <div id="post_raty"></div>
              </div>
            <label for="inputTag">タグ(,で区切ると複数タグ登録できます)</label>
              <%= f.text_field :tag_name,id: "inputTag", class: 'form-control mb-3' %>
              <%= f.submit '更新', class: "btn btn-primary" %>
            <%= link_to "削除", post_path(@post.id), method: :delete, "data-confirm" => "本当に削除しますか？", class: "btn btn-danger ms-3" %>
          <% end %>
          <script>
            $(document).on('turbolinks:load', function() {
              let elem = document.querySelector('#post_raty');
              if (elem == null) return;
  
              elem.innerHTML = ""
              let opt = {  
                starOn: "<%= asset_path('star-on.png') %>",
                starOff: "<%= asset_path('star-off.png') %>",
                starHalf: "<%= asset_path('star-half.png') %>",
                scoreName: 'post[rate]',
              };
              raty(elem, opt);
            });
          </script>
        </div>
      </div>
    </div>
  </div>
</div>
        
