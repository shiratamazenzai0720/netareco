<div class="container mt-4 mb-5">
  <div class="row justify-content-center">
    <div class="col-md-9">
      <% @posts.each do |post| %>
        <div class="mb-3 p-3 border rounded shadow-sm">
          <div class="d-flex align-items-center mb-2">
            <% if post.user %>
              <%= image_tag post.user.get_profile_image(50,50), class: "rounded-circle me-3" %>
            <% else %>
              <%= image_tag 'no_image.jpg', class: "rounded-circle me-3", size: "50x50" %>
            <% end %>
            <h5 class="mb-0"><%= post.title %></h5>
          </div>
          <p class="mb-2"><%= post.body %></p>
          <div class="d-flex justify-content-start align-items-center text-muted small">
            <span class="me-3">
              <%= post.user.present? ? post.user.name : '未登録ユーザー' %>
            </span>
            <span class="mx-2"> | </span>
            <span>
              <%= "#{post.post_comments.count} コメント" %>
            </span>
            <span class="mx-2"> | </span>
            <span>
              <%= post.tags.map(&:name).join(", ") %>
            </span>
          </div>
          <div class="text-end mt-2">
            <%= link_to '詳細へ', post_path(post.id), class: "btn btn-sm btn-outline-primary" %>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>